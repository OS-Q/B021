/*******************************************************************************
****版本：V1.0.0
****平台：STM8S003
****日期：2021-01-12
****作者：Qitas
****版权：OS-Q
*******************************************************************************/
#include <stdint.h>
#include "stm8s.h"
#include "init.h"

unsigned char i=0;


void led_init(void)
{
    PB_DDR|=0x20;
    PB_CR1|=0x20;
    PB_CR2|=0x00;
}

/*******************************************************************************
**函数信息 ：
**功能描述 ：
**输入参数 ：
**输出参数 ：
*******************************************************************************/
int main()
{
    port_init();
    led_init();
    clk_init();
    tim4_init();
    while (1)
    {
        __asm nop __endasm;
    }
}

/*******************************************************************************
**函数信息 ：
**功能描述 ：
**输入参数 ：
**输出参数 ：
*******************************************************************************/
void tim4_isr(void) __interrupt(INT_TIM4)
{
    i++;
    TIM4_SR=0x00;
    if(i==61)
    {
        PB_ODR^=0x20;
        i=0;
    }
    // PB_ODR ^= 0x20;
    // // Clear interrupt flag
    // TIM4_SR &= ~TIM4_SR_UIF;
    // // Rewrite counter, calculated value is 125
    // TIM4_CNTR = 0xFF - 123;
}

/*---------------------------(C) COPYRIGHT 2021 OS-Q -------------------------*/
